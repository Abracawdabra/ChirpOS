/**
 * ChirpOS - Operating System Module
 * @author Cawdabra
 * @license MIT
 */
"use strict";

// Namespace
var os = {};

// Name of the root directory (can be blank)
os.ROOT_DIR_NAME = "";

// The maximum capacity of the file system (in characters)
os.FILE_SYSTEM_CAPACITY = 2619440;

// The default size of a file stream buffer (in characters)
os.FILE_STREAM_BUFFER_SIZE = 1024;

// Path namespace
os.path = {};

os.path.DIR_SEPARATOR = "/";

/**
 * Returns the directory component of a path
 * @param {string} path
 * @return {string}
 */
os.path.getDirName = function(path) {
    var last_sep = path.lastIndexOf(os.path.DIR_SEPARATOR);
    if (last_sep === 0) {
        // Path is root when root has a blank name
        return os.path.DIR_SEPARATOR;
    }
    else if (last_sep > 0) {
        return path.substring(0, last_sep);
    }

    return "";
};

/**
 * Returns the base component of a path
 * @param {string} path
 * @return {string}
 */
os.path.getBaseName = function(path) {
    var last_sep = path.lastIndexOf(os.path.DIR_SEPARATOR);
    if (last_sep > -1) {
        return path.substring(last_sep + 1);
    }

    return path;
};

/**
 * Returns a string of joined path components
 * @param {...} components
 * @return {string}
 */
os.path.join = function() {
    var components = Array.prototype.slice.call(arguments);
    return components.join(os.path.DIR_SEPARATOR);
};

module.exports = os;
